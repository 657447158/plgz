webpackJsonp([3],{0:function(i,t,o){i.exports=o(96)},34:function(i,t,o){i.exports=o.p+"resource/map-icon.png"},59:function(i,t){},74:function(i,t){},96:function(i,t,o){o(59),o(113);var e=o(1),a=o(2),n=o(3),s=o(34),d={init:function(){$("header").addClass("on"),this.loadBaiduMap(),this.saveComplaints()},loadBaiduMap:function(){var i=new BMap.Map("map"),t=new BMap.Point(n.longitude,n.latitude);i.centerAndZoom(t,16),i.enableScrollWheelZoom();var o={position:t,offset:new BMap.Size(10,-40),width:250,height:100,title:"<p style='font-size: 18px;color: #a41918;margin-top: 10px'>平乐古镇·天台山</p>"},e=new BMap.InfoWindow("<div ><p style='font-size: 14px;margin-top: 15px;'>旅游咨询：028-88781094</p><p style='font-size: 14px;margin-top: 5px;'>地址：成都市邛崃市兴新街139号</p></div>",o),a=new BMap.Icon(s,new BMap.Size(40,40)),d=new BMap.Marker(t,{icon:a});i.openInfoWindow(e,i.getCenter()),d.addEventListener("click",function(){i.openInfoWindow(e,i.getCenter())}),i.addOverlay(d)},saveComplaints:function(){$(".btn").click(function(){var i={tsPeople:$(".complaints-page-form .tsPeople").val(),title:$(".complaints-page-form .title").val(),tsUnit:$("select").val(),tsReason:$(".complaints-page-form .tsReason").val()};return i.tsPeople?i.title?i.tsUnit?i.tsReason?void a.request({url:e.saveComplaints,data:i,success:function(i){0===i.code&&$.dialog({title:"在线投诉",message:"反馈成功！",mask:!0,width:400,height:200})}}):void $.dialog({title:"在线投诉",message:"请输入投诉内容！",mask:!0,width:400,height:200}):void $.dialog({title:"在线投诉",message:"请选择投诉对象！",mask:!0,width:400,height:200}):void $.dialog({title:"在线投诉",message:"请输入投诉标题！",mask:!0,width:400,height:200}):void $.dialog({title:"在线投诉",message:"请输入投诉人姓名！",mask:!0,width:400,height:200})})}};$(function(){d.init()})},113:function(i,t,o){o(74),function(i){function t(t){this.config={title:"",width:600,height:300,message:"出错了",footer:!0,buttons:null,logShow:!1,callback:function(){}},t&&i.isPlainObject(t)&&i.extend(this.config,t),this.init()}t.prototype.init=function(){this.body=i("body"),this.dialogWrap=i('<div class="ui-dialog-wrap"></div>'),this.mask=i('<div class="ui-dialog-mask"></div>'),this.dialog=i('<div class="ui-dialog"></div>'),this.dialogHd=i('<div class="ui-dialog-hd"><span class="ui-dialog-line"></span><h2 class="ui-dialog-title">购买须知</h2><i class="ui-dialog-close">×</i></div>'),this.dialogBd=i('<div class="ui-dialog-bd"></div>'),this.dialogFt=i('<div class="ui-dialog-ft ui-border-t"></div>'),this.render(),this.show(),this.event()},t.prototype.event=function(){var t=this;this.mask;i(document).on("click",".ui-dialog-close,.ui-dialog-mask",function(){"function"==typeof t.config.callback&&t.config.callback(),t.hide()})},t.prototype.render=function(){var t=this,o=i("body"),e=this.config,a=this.dialogWrap,n=this.mask,s=this.dialog,d=this.dialogHd,l=this.dialogBd,c=this.dialogFt;e.mask&&a.append(n),e.title&&(d.find(".ui-dialog-title").html(e.title),s.append(d)),e.message&&s.append(l.html(e.message)),e.buttons&&(t.creactButton(e.buttons,c),s.append(c)),e.logShow===!0&&setTimeout(function(){t.hide()},2e3),a.append(s),o.append(a),t.computed()},t.prototype.computed=function(){var t,o=this.config,e=i(".ui-dialog"),a=i(".ui-dialog-hd").outerHeight(),n=i(".ui-dialog-bd"),s=i(".ui-dialog-ft").outerHeight();e.css({width:o.width,height:o.height,marginTop:-o.height/2,marginLeft:-o.width/2}),t=o.footer?o.height-a-s-40:o.height-a-40,n.css({height:t})},t.prototype.creactButton=function(t,o){var e=this,a=e.config;i(t).each(function(){var t=this.text?this.text:"按钮"+index++,n=this.callback?this.callback:null;button=i('<a class="btn '+this.className+'">'+t+"</a>"),n?button.click(function(){var i=n();i!==!1&&e.hide()}):button.click(function(){e.hide()}),a.footer&&o.append(button)})},t.prototype.hide=function(){var i=this;i.dialogWrap.removeClass("show").addClass("hide"),setTimeout(function(){i.dialogWrap.remove()},250)},t.prototype.show=function(){var i=this;setTimeout(function(){i.dialogWrap.removeClass("hide").addClass("show")},100)},window.Dialog=t,i.dialog=function(i){return new t(i)}}(window.jQuery||$)}});